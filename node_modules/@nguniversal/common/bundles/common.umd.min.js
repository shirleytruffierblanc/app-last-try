!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common/http"),require("@angular/core"),require("@angular/platform-browser"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@nguniversal/common",["exports","@angular/common/http","@angular/core","@angular/platform-browser","rxjs","rxjs/operators","@angular/common"],t):t((e.nguniversal=e.nguniversal||{},e.nguniversal.common={}),e.ng.common.http,e.ng.core,e.ng.platformBrowser,e.rxjs,e.rxjs.operators,e.ng.common)}(this,function(e,t,r,n,o,a,s){"use strict";var i=function(){function e(e,t){var r=this;this.transferState=t,this.isCacheActive=!0,e.isStable.pipe(a.filter(function(e){return e}),a.take(1)).toPromise().then(function(){r.isCacheActive=!1})}return e.prototype.invalidateCacheEntry=function(e){var t=this;Object.keys(this.transferState.store).forEach(function(r){return r.includes(e)?t.transferState.remove(n.makeStateKey(r)):null})},e.prototype.makeCacheKey=function(e,t,r){var o=r.keys().sort().map(function(e){return e+"="+r.get(e)}).join("&");return n.makeStateKey(("GET"===e?"G.":"H.")+t+"?"+o)},e.prototype.intercept=function(e,r){var n=this;if("GET"!==e.method&&"HEAD"!==e.method&&(this.isCacheActive=!1,this.invalidateCacheEntry(e.url)),!this.isCacheActive)return r.handle(e);var s=this.makeCacheKey(e.method,e.url,e.params);if(this.transferState.hasKey(s)){var i=this.transferState.get(s,{});return o.of(new t.HttpResponse({body:i.body,headers:new t.HttpHeaders(i.headers),status:i.status,statusText:i.statusText,url:i.url}))}return r.handle(e).pipe(a.tap(function(e){e instanceof t.HttpResponse&&n.transferState.set(s,{body:e.body,headers:
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function r(e){var t,r,n={};try{for(var o=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}(e.keys()),a=o.next();!a.done;a=o.next()){var s=a.value;n[s]=e.getAll(s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}(e.headers),status:e.status,statusText:e.statusText,url:e.url})}))},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:r.ApplicationRef},{type:n.TransferState}]},e}(),u=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[n.BrowserTransferStateModule],providers:[i,{provide:t.HTTP_INTERCEPTORS,useExisting:i,multi:!0}]}]}],e}();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function c(e){return function(){return new Promise(function(t,r){var n=function(){e.removeEventListener("DOMContentLoaded",n),t()};e.addEventListener("DOMContentLoaded",n)})}}var f=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{providers:[{provide:r.APP_INITIALIZER,multi:!0,useFactory:c,deps:[s.DOCUMENT]}]}]}],e}();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */e.ɵnguniversal_modules_common_common_a=c,e.TransferHttpCacheModule=u,e.StateTransferInitializerModule=f,e.ɵTransferHttpCacheInterceptor=i,Object.defineProperty(e,"__esModule",{value:!0})});